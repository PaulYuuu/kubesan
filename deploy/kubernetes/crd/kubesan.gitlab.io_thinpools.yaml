# SPDX-License-Identifier: Apache-2.0

# Code generated by controller-gen. DO NOT EDIT.

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.14.0
  name: thinpools.kubesan.gitlab.io
spec:
  group: kubesan.gitlab.io
  names:
    kind: ThinPool
    listKind: ThinPoolList
    plural: thinpools
    singular: thinpool
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: '''VG owning the thin pool'''
      jsonPath: .spec.vgName
      name: VG
      type: string
    - description: '''Node where thin pool is currently active'''
      jsonPath: .status.activations[0].nodeName
      name: Active Node
      type: string
    - description: '''Primary reason why thin pool is active'''
      jsonPath: .status.activations[0].name
      name: Reason
      type: string
    - description: '''Time since current activation'''
      jsonPath: .status.conditions[?(@.type=="Activated")].lastTransitionTime
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ThinPool is the Schema for the thinpools API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ThinPoolSpec defines the desired state of ThinPool
            properties:
              activations:
                description: |-
                  Add an Activation onto this list in order to have the thin-pool
                  activated on the desired node eventually. If another Activation
                  is already in effect on another node, then this will only happen
                  when the existing Activation is removed from this list by its owner.
                items:
                  description: |-
                    Each operation that requires a thin-pool activation on a
                    particular node is described by an Activation. Activations allow
                    ThinPool to keep track of when it is safe to deactivate the
                    thin-pool again.
                  properties:
                    name:
                      description: Unique name (e.g. “delete-snapshot-<snapshot-name>”)
                      type: string
                    nodeName:
                      description: Which node the thin-pool should be attached to
                      type: string
                  required:
                  - name
                  - nodeName
                  type: object
                type: array
              vgName:
                description: Should be set from creation and never updated.
                type: string
                x-kubernetes-validations:
                - rule: oldSelf==self
            required:
            - vgName
            type: object
          status:
            description: ThinPoolStatus defines the observed state of ThinPool
            properties:
              activations:
                description: |-
                  Current Activations. There can be multiple Activations at the same
                  time if they have the same .NodeName.
                items:
                  description: |-
                    Each operation that requires a thin-pool activation on a
                    particular node is described by an Activation. Activations allow
                    ThinPool to keep track of when it is safe to deactivate the
                    thin-pool again.
                  properties:
                    name:
                      description: Unique name (e.g. “delete-snapshot-<snapshot-name>”)
                      type: string
                    nodeName:
                      description: Which node the thin-pool should be attached to
                      type: string
                  required:
                  - name
                  - nodeName
                  type: object
                type: array
              conditions:
                description: |-
                  Conditions
                  Available: The ThinPool was created and can be activated on nodes.
                  Activated: Indicates when an activation occurs.
                items:
                  description: |-
                    Condition represents the state of the operator's
                    reconciliation functionality.
                  properties:
                    lastHeartbeatTime:
                      format: date-time
                      type: string
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      description: ConditionType is the state of the operator's reconciliation
                        functionality.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
